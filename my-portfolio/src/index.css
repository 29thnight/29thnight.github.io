:root {
  --maxw: 1100px;

  /* Light theme (default) */
  --bg-1: #e6eef7;
  --bg-2: #dfe7f2;
  --bg-3: #d8e0ec;
  --bg-4: #d2dae7;

  --text: #0c1222;
  --glass-bg: rgba(255,255,255,0.65);
  --glass-brd: rgba(0,0,0,0.08);
  --glass-hover: rgba(255,255,255,0.72);

  --tag-brd: rgba(0,0,0,0.18);
  --tag-active: #0c1222;           /* 라이트: 어두운 배경 */
  --tag-active-text: #ffffff;      /* 라이트: 흰 글자 */
  --tag-hover-bg: rgba(0,0,0,.06); /* 라이트: hover 배경 */
  --tag-hover-text: var(--text);   /* 라이트: hover 글자 */
  --tag-active-hover: #0a0f1d;     /* 라이트: active hover */
}

:root[data-theme="dark"] {
  --bg-1: #0f172a;
  --bg-2: #0b1020;
  --bg-3: #060912;
  --bg-4: #04060d;

  --text: #ffffff;
  --glass-bg: rgba(255,255,255,0.08);
  --glass-brd: rgba(255,255,255,0.18);
  --glass-hover: rgba(255,255,255,0.10);

  --tag-brd: rgba(255,255,255,0.25);
  --tag-active: #ffffff;           /* ✅ 다크: 흰 배경 */
  --tag-active-text: #000000;      /* ✅ 다크: 검정 글자 */
  --tag-hover-bg: rgba(255,255,255,.14); /* 다크: hover 배경 */
  --tag-hover-text: #ffffff;       /* 다크: hover 글자 */
  --tag-active-hover: #f2f2f2;     /* 다크: active hover */
}

* { box-sizing: border-box; }
html, body, #root { height: 100%; }
body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans KR", Arial, "Apple Color Emoji", "Segoe UI Emoji";
  color: var(--text);
}

/* 배경 그라디언트 */
.bg {
  min-height: 100%;
  background:
    radial-gradient(1200px 800px at 15% 10%, var(--bg-1) 0%, var(--bg-2) 35%, var(--bg-3) 60%, var(--bg-4) 100%);
}
.text { color: var(--text); }

.container { padding: 0 1rem; margin: 0 auto; max-width: var(--maxw); }
.stack > * + * { margin-top: 2.25rem; }

.topbar { position: sticky; top: 0; z-index: 50; padding-top: 1rem; }
.nav { display: flex; align-items: center; justify-content: space-between; padding: .9rem 1rem; }
.brand { font-weight: 700; letter-spacing: -.01em; color: var(--text); text-decoration: none; }
.links a, .links .link { color: var(--text); opacity: .9; text-decoration: none; margin-left: 1rem; }
.links a:hover, .links .link:hover { text-decoration: underline; }

.section { padding: 1.5rem; }
.pad-lg { padding: 2.5rem 1.75rem; }
.title { font-size: clamp(1.75rem, 3.6vw, 3rem); font-weight: 800; letter-spacing: -.02em; margin: 0; }
.subtitle { margin: .6rem 0 0; opacity: .9; }

.h2 { font-size: 1.25rem; font-weight: 700; margin: 0; }
.h3 { font-size: 1.05rem; font-weight: 700; margin: 0; }
.mb { margin-bottom: .75rem; }

.text-body { opacity: .92; line-height: 1.65; }
.link {
  /* 공통 */
  color: var(--text);
  text-decoration: underline;
  cursor: pointer;

  /* a / button 차이 제거 */
  background: transparent;
  border: none;
  padding: 0;                /* ✅ 버튼의 기본 좌우 패딩 제거 */
  font: inherit;             /* ✅ 버튼의 시스템 폰트 → 부모 폰트로 통일 */
  line-height: inherit;      /* ✅ 라인높이도 통일 */
  vertical-align: baseline;  /* ✅ 베이스라인 정렬 */
  -webkit-appearance: none;  /* ✅ 브라우저 기본 버튼 외형 제거 */
  appearance: none;
}
.code { padding: .25rem .5rem; background: rgba(0,0,0,.06); border-radius: .4rem; }
:root[data-theme="dark"] .code { background: rgba(255,255,255,.1); }

.grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 1rem; }
.col { display: flex; flex-direction: column; }
.row { display: flex; align-items: center; gap: .5rem; }
.row.between { justify-content: space-between; }
.gap-sm { gap: .75rem; }
.gap { gap: 1rem; }

.card { padding: 1.25rem; }
.tags { display: flex; flex-wrap: wrap; gap: .5rem; margin-top: .6rem; }

/* 태그(필터) 버튼 */
.tag {
  font-size: .8rem;
  padding: .35rem .6rem;
  border-radius: 999px;
  border: 1px solid var(--tag-brd);
  background: transparent;
  color: var(--text);
  cursor: pointer;
  transition: background .15s ease, color .15s ease, border-color .15s ease, transform .08s ease;
}
.tag:hover {
  background: var(--tag-hover-bg);
  color: var(--tag-hover-text);
}
.tag:active { transform: translateY(1px); }
.tag:focus-visible {
  outline: 2px solid #5b9fff;
  outline-offset: 2px;
}

/* 활성 태그(= 선택됨) */
.tag-active {
  background: var(--tag-active);
  color: var(--tag-active-text);   /* ✅ 라이트/다크 모두 가독성 확보 */
  border-color: transparent;
}
.tag-active:hover {
  background: var(--tag-active-hover);
}

/* 필터 행 */
.tags.filter { margin-top: 0; }

.mt { margin-top: .75rem; }
.muted { opacity: .8; }

.footer { opacity: .7; font-size: .8rem; padding-bottom: 2rem; text-align: left; }

/* 유리 카드 */
.glass {
  border-radius: 16px;
  background: var(--glass-bg);
  border: 1px solid var(--glass-brd);
  box-shadow: 0 10px 30px rgba(0,0,0,0.18);
  backdrop-filter: blur(18px) saturate(160%);
  -webkit-backdrop-filter: blur(18px) saturate(160%);
  transition: transform .15s ease, background .15s ease, border-color .15s ease;
}
.glass:hover {
  transform: translateY(-2px);
  background: var(--glass-hover);
  border-color: var(--glass-brd);
}

html { scroll-behavior: smooth; }
section[id] { scroll-margin-top: 84px; }

/* ---- NAV ---- */
.links.nav-links {
  display: flex;
  align-items: center;
  gap: .4rem;
}

/* 네비 링크(액티브 상태를 pill로 표시) */
.nav-link {
  color: var(--text);
  text-decoration: none;
  padding: .35rem .75rem;
  border-radius: 9999px;
  border: 1px solid transparent;
  opacity: .85;
  transition: background .15s ease, color .15s ease, border-color .15s ease, opacity .15s ease;
}
.nav-link:hover {
  opacity: 1;
  background: var(--tag-hover-bg);
  color: var(--tag-hover-text);
}
.nav-link.active {
  opacity: 1;
  background: var(--glass-hover);
  border-color: var(--glass-brd);
}

/* 시스템 다크모드 초기값(직접 토글 전) */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    color-scheme: dark;
  }
}

/* === Brand gradient (라이트/다크 테마 색상 변수) === */
:root {
  --brand-g1: #5f02ff;
  --brand-g2: #9d00ff;
  --brand-g3: #c300ff;
}
:root[data-theme="dark"] {
  --brand-g1: #a78bfa;  /* 라이트한 보라 */
  --brand-g2: #22d3ee;  /* 라이트한 청록 */
  --brand-g3: #86efac;  /* 라이트한 연두 */
}

/* 텍스트 그라데이션 */
.brand-gradient {
  background: linear-gradient(90deg, var(--brand-g1), var(--brand-g2) 50%, var(--brand-g3));
  background-size: 100% 100%;
  -webkit-background-clip: text;
          background-clip: text;
  -webkit-text-fill-color: transparent; /* 사파리 대비 */
  color: transparent;
  text-decoration: none;
  transition: filter .15s ease;
}
.brand-gradient:hover { filter: brightness(1.05); }

/* 선택 영역 시 가독성(선택 배경 대비) */
.brand-gradient::selection {
  -webkit-text-fill-color: #000;
  color: #000;
  background: #fff7; /* 살짝 투명한 흰색 */
}
:root[data-theme="dark"] .brand-gradient::selection {
  -webkit-text-fill-color: #000;
  color: #000;
  background: #fffb; /* 다크에선 좀 더 밝게 */
}

/* (옵션) 부드럽게 색이 흐르는 애니메이션 */
.brand-animated {
  background-size: 200% 100%;
  animation: brand-shift 6s ease-in-out infinite;
}
@keyframes brand-shift {
  0%   { background-position:   0% 50%; }
  50%  { background-position: 100% 50%; }
  100% { background-position:   0% 50%; }
}

:root {
  --ring-w: 1.5px;               /* 테두리 두께 */
  --ring-grad: linear-gradient(135deg, var(--brand-g1), var(--brand-g2) 50%, var(--brand-g3));
}

/* 브랜드 캡슐(텍스트 + 그라데이션 테두리) */
.brand-chip {
  display: inline-block;
  position: relative;
  padding: .35rem .75rem;        /* 캡슐 형태 패딩 */
  border-radius: 9999px;
  text-decoration: none;
}
.brand-chip::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  padding: var(--ring-w);        /* 테두리 두께 */
  background: var(--ring-grad);
  /* 내부를 뚫어서 '테두리 링'만 남기기 (마스크) */
  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
          mask-composite: exclude;
  pointer-events: none;
}

/* 활성 네비 pill에도 동일한 그라데이션 테두리 적용 */
.nav-link.active {
  position: relative;
  background: var(--glass-hover);
  border-color: transparent;     /* 기본 테두리는 비활성화 */
}
.nav-link.active::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 9999px;
  padding: var(--ring-w);
  background: var(--ring-grad);
  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
          mask-composite: exclude;
  pointer-events: none;
}

/* 살짝 은은한 광택 느낌 (선택) */
.brand-chip:hover,
.nav-link.active:hover {
  filter: brightness(1.05);
}

/* tall 섹션: 섹션 자체 높이만 키움 */
.section-tall { min-height: 72vh; }
@media (max-width: 768px) {
  .section-tall { min-height: 58vh; }
}

/* 카드까지 꽉 채우고 싶을 때: 섹션+카드 모두 늘림 */
.section-tall-fill { min-height: 72vh; display: flex; }
.section-tall-fill .glass { flex: 1; display: flex; }
.section-tall-fill .card  { flex: 1; }

@media (max-width: 768px) {
  .section-tall-fill { min-height: 58vh; }
}

/* (선택) 내부 패딩 더 늘리고 싶을 때 */
.pad-xl { padding: 3rem 2rem; }
@media (min-width: 768px) {
  .pad-xl { padding: 4rem 3rem; }
}

/* Projects 카드 설명 전용 크기 */
:root { --project-desc-size: .92rem; }          /* 약 15px 정도 */
@media (min-width: 1024px) {
  :root { --project-desc-size: .95rem; }        /* 데스크톱에서 살짝 키움(선택) */
}

.project-desc {
  font-size: var(--project-desc-size);
  line-height: 1.55;     /* 기존 text-body(1.65)보다 조금 조밀하게 */
  opacity: .9;
}

.mt-xs { margin-top: .4rem; }

:root {
  --link-size-sm: .9rem; /* 약 14.4px — 더 작게 하고 싶으면 .875rem */
}
.link-sm {
  font-size: var(--link-size-sm);
  line-height: 1.35; /* 줄간격 살짝 타이트하게 */
}

/* --- Projects 확장 카드 --- */
.grid .expanded { grid-column: 1 / -1; }        /* ✅ 선택 카드만 가로로 전체 폭 */
.card-expanded { padding: 1.5rem; }
@media (min-width: 1024px) {
  .card-expanded { padding: 2rem; }
}

/* 뒤로가기 줄(타이틀 위에 살짝 공간) */
.back-row { margin-bottom: .5rem; }

/* 밑줄 없이 보이는 깔끔한 링크(호버 시만 밑줄) */
.link-plain { text-decoration: none; }
.link-plain:hover { text-decoration: underline; }

/* 작은 상단 마진 유틸 (Repo 아래 Read more 간격) */
.mt-xs { margin-top: .4rem; }

/* 노션 본문 컨테이너 가독성 */
.notion-wrap { max-width: 100%; }
.notion-wrap .text-body { line-height: 1.65; }
.notion-wrap pre { overflow:auto; padding:.75rem; border-radius:.5rem; }

/* ===== Glass Button ===== */
:root {
  /* 그라데이션 링이 필요하면 아래 색 변수를 사용 (이미 있으면 재정의 OK) */
  --brand-g1: #7c3aed;
  --brand-g2: #06b6d4;
  --brand-g3: #22c55e;
  --ring-w: 1.5px;
  --ring-grad: linear-gradient(135deg, var(--brand-g1), var(--brand-g2) 50%, var(--brand-g3));
}

.glass-btn {
  display: inline-flex;
  align-items: center;
  gap: .4rem;
  padding: .4rem .8rem;
  border-radius: 9999px;
  background: var(--glass-bg);
  border: 1px solid var(--glass-brd);
  backdrop-filter: blur(18px) saturate(160%);
  -webkit-backdrop-filter: blur(18px) saturate(160%);
  color: var(--text);
  font: inherit;
  line-height: 1.1;
  cursor: pointer;
  transition: transform .12s ease, background .15s ease, border-color .15s ease, filter .15s ease;
}
.glass-btn:hover { background: var(--glass-hover); transform: translateY(-1px); }
.glass-btn:active { transform: translateY(0); }
.glass-btn:focus-visible { outline: 2px solid #5b9fff; outline-offset: 2px; }

.glass-btn-sm { padding: .32rem .7rem; font-size: .9rem; }

/* 그라데이션 링 변형 */
.glass-btn--ring { position: relative; border-color: transparent; }
.glass-btn--ring::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  padding: var(--ring-w);
  background: var(--ring-grad);
  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
          mask-composite: exclude;
  pointer-events: none;
}

.card-expanded .h3 {
  font-size: clamp(1.4rem, 2.2vw, 1.85rem); /* 기존 1.05rem → 크게 */
  font-weight: 800;
  letter-spacing: -0.01em;
  margin-top: .25rem;
}

/* 공통 리스트 래퍼 (겹침 방지용 패딩) */
.nt-list {
  margin: .4rem 0 .6rem 0;
  padding-left: 1.15rem;              /* ✅ 마커가 컨텐트 영역 안에서 시작 */
  list-style-position: outside;       /* 기본: 마커는 바깥, 하지만 padding으로 공간 확보 */
}

/* 콜아웃 내부에선 아이콘 폭만큼 더 안 쪽으로 */
.notion-callout .callout-content .nt-list {
  padding-left: 1.2rem;               /* ✅ 아이콘 영역과 마커가 겹치지 않도록 */
  margin-left: 0;
}

/* 콜아웃 레이아웃 보강 */
.notion-callout { display:flex; gap:.7rem; align-items:flex-start; }
.notion-callout .callout-content { min-width:0; } /* 긴 줄 줄바꿈 허용 */

/* === 인라인 리치 텍스트 === */
.nt-bold{font-weight:700}
.nt-italic{font-style:italic}
.nt-underline{text-decoration:underline}
.nt-strike{text-decoration:line-through}
.nt-code{
  font-family: ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;
  background: color-mix(in oklab, var(--glass-bg) 85%, black 5%);
  border: 1px solid var(--glass-brd);
  padding: .05rem .35rem;
  border-radius: .35rem;
}

/* === 인용 === */
.notion-quote{
  margin:.75rem 0;
  padding:.5rem .9rem;
  border-left: 3px solid var(--glass-brd);
  background: color-mix(in oklab, var(--glass-bg) 92%, black 4%);
  border-radius:.5rem;
  opacity:.95;
}

/* === 콜아웃 === */
.notion-callout{
  display:flex; gap:.6rem; align-items:flex-start;
  margin:.75rem 0; padding:.7rem .9rem;
  border:1px solid var(--glass-brd);
  background: var(--glass-hover);
  border-radius:.75rem;
}
.callout-icon{
  flex:0 0 auto; width:1.75rem; height:1.75rem;
  display:grid; place-items:center;
  border-radius:.5rem;
  background: color-mix(in oklab, var(--glass-bg) 85%, black 5%);
  border:1px solid var(--glass-brd);
  font-size:1rem;
}
.callout-content{ flex:1 1 auto; }

/* === 코드 블록 === */
.notion-code{
  position:relative;
  margin:.85rem 0; padding:.85rem 1rem;
  background: color-mix(in oklab, var(--glass-bg) 88%, black 6%);
  border:1px solid var(--glass-brd);
  border-radius:.75rem;
  overflow:auto;
}
.notion-code code{
  font-family: ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;
  font-size:.92rem; line-height:1.5;
  white-space:pre;
}
.notion-code .code-lang{
  position:absolute; top:.4rem; right:.55rem;
  font-size:.7rem; opacity:.7;
  border:1px solid var(--glass-brd);
  border-radius:.4rem; padding:.05rem .35rem;
  background: color-mix(in oklab, var(--glass-bg) 92%, black 4%);
}

/* === 체크박스/토글 === */
.notion-todo { display:flex; gap:.5rem; align-items:flex-start; margin:.35rem 0; }
.notion-toggle { margin:.5rem 0; }
.notion-toggle > summary { cursor:pointer; }

/* === 이미지 === */
.notion-img { margin:.75rem 0; }
.notion-img img{
  display:block; max-width:100%; height:auto;
  border-radius:.75rem; border:1px solid var(--glass-brd); background:var(--glass-bg);
}
.notion-img figcaption{ font-size:.9rem; opacity:.8; margin-top:.25rem; }

/* ===== Notion 리스트 가독성 향상 ===== */
:root{
  /* 들여쓰기 기본/중첩 단계 (필요하면 수치만 조절) */
  --nt-indent: 1.25rem;         /* 최상위 리스트 들여쓰기 */
  --nt-indent-nested: 1.25rem;  /* 중첩 리스트 단계당 들여쓰기 */
  --nt-li-gap: .22rem;          /* 아이템 사이 간격 */
  --nt-li-line: 1.6;            /* 아이템 줄간격 */
}

/* 리스트 래퍼: 바깥 여백과 기본 들여쓰기 */
.nt-list{
  margin: .6rem 0 .85rem;
  padding-left: var(--nt-indent);
  list-style-position: outside;   /* 마커는 바깥쪽(기본) */
}

/* 아이템 자체 간격/줄간격 */
.nt-list > li{
  margin: var(--nt-li-gap) 0;
  line-height: var(--nt-li-line);
}

/* 같은 깊이에서 연속 아이템 간격 살짝 더 띄우기 */
.nt-list > li + li{ margin-top: calc(var(--nt-li-gap) + .06rem); }

/* 중첩 리스트: 부모 아이템과 약간의 간격 + 단계별 들여쓰기 */
.nt-list ul,
.nt-list ol{
  margin: .35rem 0 .5rem;
  padding-left: var(--nt-indent-nested);  /* depth마다 동일하게 더해짐 */
}

/* 부모 아이템 텍스트와 자식 리스트 사이 작은 간격 */
.nt-list li > .nt-list{ margin-top: .18rem; }

/* 마커(•, 1., 등) 크기 살짝 줄여 텍스트와 충돌 방지 */
.nt-list li::marker{ font-size: .92em; }

/* --- 콜아웃 내부 보정: 아이콘 영역만큼 여유 공간 확보 --- */
.notion-callout .callout-content .nt-list{
  padding-left: calc(var(--nt-indent) + .45rem);
}
.notion-callout .callout-content .nt-list ul,
.notion-callout .callout-content .nt-list ol{
  padding-left: calc(var(--nt-indent-nested) + .35rem);
}

/* ===== Notion headings (서로 다른 크기/여백) ===== */
:root{
  --nt-h1-size: clamp(1.45rem, 2.3vw, 1.95rem);
  --nt-h2-size: clamp(1.25rem, 1.9vw, 1.6rem);
  --nt-h3-size: clamp(1.08rem, 1.5vw, 1.28rem);
}

.nt-h1, .nt-h2, .nt-h3{
  font-weight: 800;
  letter-spacing: -0.01em;
  line-height: 1.25;
  margin: 1.1rem 0 .5rem;
}

.nt-h1{ font-size: var(--nt-h1-size); }
.nt-h2{ font-size: var(--nt-h2-size); }
.nt-h3{ font-size: var(--nt-h3-size); }

/* 본문과의 간격 살짝 보강 */
.nt-h1 + .text-body,
.nt-h2 + .text-body,
.nt-h3 + .text-body { margin-top: .25rem; }

/* 콜아웃: 컨테이너가 부모 폭 안에 꼭 맞도록 */
.notion-callout{
  width: 100%;
  box-sizing: border-box;
  overflow: hidden;              /* 아주 긴 토큰이 있을 때 마지막 안전장치 */
}

/* 콜아웃 본문: 줄바꿈 허용 + flex 수축 허용 */
.notion-callout .callout-content{
  min-width: 0;                  /* ✅ flex 자식이 줄어들 수 있게 */
  overflow-wrap: anywhere;       /* 아무 곳에서나 줄바꿈(긴 URL/단어 대응) */
  word-break: break-word;        /* 단어 중간 분리 허용(크로스 브라우저) */
  hyphens: auto;                 /* 하이픈 자동 삽입(지원 브라우저) */
}

/* 콜아웃 내부 링크/코드도 줄바꿈 허용 */
.notion-callout .callout-content a{
  overflow-wrap: anywhere;
  word-break: break-word;
}

.notion-callout .callout-content code{
  white-space: pre-wrap;         /* 코드는 기본 pre지만 모바일에선 감싸기 */
  word-break: break-word;
}

/* 아주 작은 화면에서 아이콘/내용이 겹치지 않게 보정 */
@media (max-width: 420px){
  .notion-callout{
    gap: .55rem;
    padding-right: .5rem;        /* 오른쪽 약간의 여유 */
  }
  .notion-callout .callout-icon{
    width: 1.5rem; height: 1.5rem;  /* 아이콘 살짝 축소 */
  }
  /* 리스트가 콜아웃 안에서 넘치지 않도록 여백 축소 */
  .notion-callout .callout-content .nt-list{
    padding-left: 1rem;
  }
}

/* 코드 블록(콜아웃 밖 포함) 모바일에서 가로 스크롤/줄바꿈 처리 */
@media (max-width: 480px){
  .notion-code{ overflow-x: auto; }
  .notion-code code{
    white-space: pre-wrap;       /* 너무 긴 라인 줄바꿈 */
    word-break: break-word;
  }
}

/* ===== 모바일 전용 튜닝 ===== */
@media (max-width: 640px){
  /* 화면 가로 넘침 방지 */
  html, body { max-width: 100vw; overflow-x: hidden; }

  /* 상단바를 모바일 친화적으로 재배치 */
  .container.topbar { 
    position: sticky; top: 0; z-index: 50;
    padding-inline: .5rem;     /* 좌우 여백만 살짝 */
  }
  .topbar .nav{
    display: grid;
    grid-template-columns: 1fr; /* 위아래 두 줄 배치 (브랜드 / 탭들) */
    row-gap: .45rem;
    align-items: center;
  }

  /* 브랜드(왼쪽 로고/텍스트) */
  .topbar .brand{
    display: inline-block;
    padding: .4rem .65rem;
    border-radius: 9999px;
    border: 1px solid var(--glass-brd);
    background: var(--glass-hover);
    font-size: .95rem;
    line-height: 1;
  }

  /* 탭 영역: 가로 스크롤 가능하게 */
  .topbar .nav-links{
    display: flex;
    align-items: center;
    gap: .5rem;
    overflow-x: auto;           /* ✅ 넘치면 가로 스크롤 */
    -webkit-overflow-scrolling: touch;
    overscroll-behavior-x: contain;
    white-space: nowrap;        /* 한 줄 유지 */
    padding-bottom: .25rem;     /* 손가락 스와이프 여유 */
  }
  .topbar .nav-links::-webkit-scrollbar{ display: none; }
  .topbar .nav-links{ scrollbar-width: none; }
  .topbar .nav-links > *{ flex-shrink: 0; } /* ThemeToggle도 줄어들지 않게 */

  /* 개별 탭 스타일(모바일 사이즈) */
  .topbar .nav-link{
    padding: .4rem .65rem;
    border-radius: 9999px;
    border: 1px solid var(--glass-brd);
    background: var(--glass-hover);
    font-size: .9rem;
    line-height: 1;
    text-decoration: none;
  }
  .topbar .nav-link.active{
    border-color: transparent;
    background:
      linear-gradient(var(--glass-hover), var(--glass-hover)) padding-box,
      linear-gradient(135deg, var(--brand-g1), var(--brand-g2), var(--brand-g3)) border-box;
    border: 1.5px solid transparent;
  }

  /* 섹션 앵커 보정: sticky 헤더 고려 */
  #home, #about, #projects, #experience, #contact {
    scroll-margin-top: 84px;
  }

  /* 프로젝트 카드: 모바일에선 1열 + 확장 카드도 자연스럽게 */
  .grid { grid-template-columns: 1fr !important; }
  .grid .expanded { grid-column: auto; }
  .card-expanded { padding: 1rem; }

  /* Notion/콜아웃이 튀어나오지 않게 */
  .notion-wrap { overflow-x: hidden; }
  .notion-callout .callout-content{
    min-width: 0;
    overflow-wrap: anywhere;
    word-break: break-word;
  }
  .notion-code{ overflow-x: auto; }
  .notion-code code{ white-space: pre-wrap; word-break: break-word; }
}
/* iOS Safari에서 그라데이션 텍스트 투명 이슈: 모바일에서만 일반 텍스트 */
@supports (-webkit-touch-callout: none) {
  @media (pointer: coarse) and (max-width: 640px) {
    .brand-gradient{
      background: none !important;
      -webkit-background-clip: initial !important;
              background-clip: border-box !important;
      -webkit-text-fill-color: currentColor !important;
      color: var(--text) !important;
    }
  }
}

/* ── 모바일 전용 (≤640px) ── */
@media (max-width: 640px){

  /* 네비 레이아웃: 브랜드가 가로로 늘어나지 않게 */
  .topbar .nav{
    display: grid;
    grid-template-columns: 1fr;
    row-gap: .55rem;
    justify-items: start;            /* ✅ stretch → start */
    align-items: center;
  }

  /* 브랜드(Portfolio): 내용 폭만큼, 캡슐 링 제거 */
  .topbar .brand{
    justify-self: start;             /* ✅ 좌측 정렬 + 내용 폭 */
    width: auto !important;
    max-width: 80%;
    display: inline-flex;
    padding: 0;                      /* 텍스트만 보이게 */
    background: none;
    border: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    position: relative;
    z-index: 1;
  }
  .brand-chip::before{               /* ✅ 길게 보이던 그라데이션 링 제거 */
    display: none !important;
  }

  /* 네비 캡슐 */
  .topbar .nav-links{
    display: flex;                   /* (보장) */
    align-items: center;
    justify-content: center;         /* ✅ 중앙 정렬 */
    gap: .35rem;
    padding: .35rem .5rem;
    width: 100%;
    overflow-x: auto;
    white-space: nowrap;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior-x: contain;
    position: relative;
    z-index: 2;                      /* 브랜드보다 위 */
  }
  .topbar .nav-links::before{ pointer-events: none; }
  .topbar .nav-link{ flex: 0 0 auto; }

  /* ✅ 토글을 뷰포트 우하단에 고정(FAB) — 네비 안에 있어도 강제 분리 */
  .theme-fab,
  .topbar .nav-links .theme-fab{
    position: fixed !important;
    right: calc(env(safe-area-inset-right, 0) + 16px) !important;
    bottom: calc(env(safe-area-inset-bottom, 0) + 16px) !important;
    z-index: 1000;
    display: inline-flex;
    align-items: center;
    gap: .35rem;
    padding: .55rem .8rem;
    border-radius: 9999px;
    background: var(--glass-bg);
    border: 1px solid var(--glass-brd);
    backdrop-filter: blur(14px) saturate(160%);
    -webkit-backdrop-filter: blur(14px) saturate(160%);
    box-shadow: 0 10px 28px rgba(0,0,0,.18);
    pointer-events: auto;
    margin: 0 !important;            /* 네비 내부 자리차지 제거 */
  }

  /* 앵커 스크롤 보정 */
  #home, #about, #projects, #experience, #contact { scroll-margin-top: 84px; }
}


